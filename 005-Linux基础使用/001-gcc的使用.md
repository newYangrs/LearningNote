## gcc的使用

### 1.gcc的编译链接过程

```mermaid
graph LR
A(hello.c)-->|gcc -E| B(hello.i)
B-->| gcc -S |C(hello.s)
C-->|gcc -c|D(hello.o)
D-->|链接|E(hello.out)
```

- **预处理Pre-Processing：**展开宏、头文件，替换条件，编译，删除注释、空行、空白

- **编译Compiling：**检查语法规范，转换成汇编文本， 消耗时间和系统资源最多

- **汇编Assembling：**将汇编文本转换成机器语言

- **链接Linking ：** **数据段合并**  、**地址回填**



### 2.常用参数

|           操作           |                             功能                             |
| :----------------------: | :----------------------------------------------------------: |
| -v / ——version/ -version |                        查看gcc版本号                         |
|            -I            |                        指定头文件目录                        |
|            -c            |                 只编译，不链接，生成`.o`文件                 |
|            -g            |                         包含调试信息                         |
|      -On （n=0~3）       |         编译优化，n越大，优化越多，嵌入式优化级别小          |
|          -Wall           |                       提示更多警告信息                       |
|         -D<DEF>          |                         编译时定义宏                         |
|            -E            |                        生成预处理文件                        |
|            -M            |  生成`.c`文件与头文件依赖以用于makefile，包括系统库的头文件  |
|           -MM            | 生成`.c`文件与头文件依赖以用于makefile，不包括系统库的头文件 |

### 3.gcc后缀名词解释

| 后缀名      | 所对应的语言                | 编译流程                   |
| ----------- | --------------------------- | -------------------------- |
| **.c**      | **C原始程序**               | **预处理、编译、汇编**     |
| .C/.cc/.cxx | C++原始程序                 | 预处理、编译、汇编         |
| .m          | Objective-C原始程序         | 预处理、编译、汇编         |
| **.i**      | **已经过预处理的C原始程序** | **编译、汇编**             |
| .ii         | 已经过预处理的C++原始程序   | 编译、汇编                 |
| **.s/.S**   | **汇编语言原始程序**        | **汇编**                   |
| **.h**      | **预处理文件（头文件）**    | **（一般不出现在指令行）** |
| **.o**      | **目标文件**                | **链接**                   |
| **.a/.so**  | **编译后的库文件**          | **链接**                   |



